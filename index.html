<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>NexLang Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        :root {
            --bg: #05060a;
            --bg-elevated: #101320;
            --bg-elevated-soft: #141827;
            --accent: #5b8dff;
            --accent-soft: rgba(91,141,255,0.14);
            --accent-strong: #7ea4ff;
            --text: #f5f7ff;
            --text-soft: #a7afcb;
            --danger: #ff4f6b;
            --border: #252b40;
            --code-bg: #111524;
            --shadow-soft: 0 18px 40px rgba(0,0,0,0.55);
            --radius-lg: 18px;
            --radius-xl: 24px;
            --radius-pill: 999px;
            --nav-height: 60px;
        }

        * {
            box-sizing: border-box;
        }

        html, body {
            margin: 0;
            padding: 0;
            background: radial-gradient(circle at top, #161a2c 0, #05060a 45%);
            color: var(--text);
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Top navigation */

        .top-nav {
            position: sticky;
            top: 0;
            z-index: 50;
            backdrop-filter: blur(18px);
            background: linear-gradient(to bottom, rgba(5,6,10,0.92), rgba(5,6,10,0.78));
            border-bottom: 1px solid rgba(255,255,255,0.03);
        }

        .top-nav-inner {
            max-width: 1120px;
            margin: 0 auto;
            padding: 0 16px;
            height: var(--nav-height);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .brand-logo {
            width: 32px;
            height: 32px;
            border-radius: 12px;
            background: conic-gradient(from 220deg, #5b8dff, #6ce8ff, #9b7dff, #5b8dff);
            box-shadow: 0 0 35px rgba(91,141,255,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 18px;
            color: #05060a;
        }

        .brand-text {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .brand-title {
            font-weight: 600;
            font-size: 16px;
            letter-spacing: 0.06em;
            text-transform: uppercase;
        }

        .brand-subtitle {
            font-size: 11px;
            color: var(--text-soft);
            text-transform: uppercase;
            letter-spacing: 0.14em;
        }

        .top-nav-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pill-badge {
            padding: 6px 12px;
            border-radius: var(--radius-pill);
            font-size: 11px;
            font-weight: 500;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            border: 1px solid rgba(91,141,255,0.5);
            background: radial-gradient(circle at top left, rgba(91,141,255,0.24), transparent 55%);
            color: var(--accent-strong);
        }

        .top-nav-btn {
            border-radius: 999px;
            border: 1px solid rgba(255,255,255,0.04);
            background: rgba(17,21,36,0.9);
            padding: 6px 12px;
            font-size: 12px;
            color: var(--text-soft);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: 0.18s ease background, 0.18s ease color, 0.18s ease border, 0.18s ease transform;
        }

        .top-nav-btn span.icon {
            font-size: 14px;
        }

        .top-nav-btn:hover {
            border-color: rgba(91,141,255,0.8);
            background: radial-gradient(circle at top, rgba(91,141,255,0.24), rgba(17,21,36,0.98));
            color: var(--accent-strong);
            transform: translateY(-1px);
        }

        .menu-toggle {
            display: none;
            border-radius: 999px;
            border: 1px solid rgba(255,255,255,0.08);
            background: rgba(9,11,20,0.9);
            padding: 6px 10px;
            color: var(--text-soft);
            font-size: 12px;
            cursor: pointer;
            gap: 6px;
            align-items: center;
        }

        .menu-toggle span.icon {
            font-size: 18px;
            transform: translateY(1px);
        }

        /* Layout */

        .page {
            flex: 1 1 auto;
        }

        .layout {
            max-width: 1120px;
            margin: 16px auto 40px auto;
            padding: 0 16px 24px 16px;
            display: grid;
            grid-template-columns: minmax(0, 270px) minmax(0, 1fr);
            gap: 20px;
        }

        /* Sidebar */

        .sidebar {
            position: sticky;
            top: calc(var(--nav-height) + 12px);
            align-self: flex-start;
            border-radius: var(--radius-xl);
            background: linear-gradient(145deg, rgba(9,13,24,0.98), rgba(10,14,30,0.98));
            border: 1px solid rgba(255,255,255,0.04);
            box-shadow: var(--shadow-soft);
            padding: 14px 14px 16px 14px;
            max-height: calc(100vh - var(--nav-height) - 56px);
            overflow: auto;
        }

        .sidebar-title {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.16em;
            color: var(--text-soft);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sidebar-title-dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: radial-gradient(circle at center, #6ce8ff, #5b8dff);
            box-shadow: 0 0 12px rgba(91,141,255,0.8);
        }

        .toc-group {
            margin-bottom: 8px;
        }

        .toc-heading {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            margin: 10px 0 6px 0;
            color: var(--text-soft);
        }

        .toc-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .toc-list li a {
            display: block;
            padding: 6px 10px;
            border-radius: 999px;
            font-size: 13px;
            color: var(--text-soft);
            text-decoration: none;
            border: 1px solid transparent;
            cursor: pointer;
            transition: 0.18s ease background, 0.18s ease border, 0.18s ease color, 0.18s ease transform;
        }

        .toc-list li a:hover {
            background: rgba(91,141,255,0.12);
            border-color: rgba(91,141,255,0.45);
            color: var(--accent-strong);
            transform: translateX(2px);
        }

        .toc-list li a.active {
            background: radial-gradient(circle at top left, rgba(91,141,255,0.3), rgba(17,21,36,0.96));
            border-color: rgba(91,141,255,0.85);
            color: var(--text);
            transform: translateX(2px);
        }

        /* Content */

        .content {
            border-radius: var(--radius-xl);
            background: radial-gradient(circle at top left, rgba(91,141,255,0.12), rgba(9,11,24,0.97));
            border: 1px solid rgba(255,255,255,0.06);
            box-shadow: var(--shadow-soft);
            padding: 18px 18px 24px 18px;
        }

        .doc-header {
            border-radius: var(--radius-lg);
            padding: 16px 16px 18px 16px;
            background: linear-gradient(135deg, rgba(16,20,42,0.98), rgba(13,16,33,0.98));
            border: 1px solid rgba(255,255,255,0.06);
            margin-bottom: 18px;
            position: relative;
            overflow: hidden;
        }

        .doc-header::after {
            content: "";
            position: absolute;
            inset: -80px -140px auto auto;
            background:
                radial-gradient(circle at top, rgba(91,141,255,0.6), transparent 55%),
                radial-gradient(circle at bottom left, rgba(108,232,255,0.5), transparent 60%);
            opacity: 0.25;
            pointer-events: none;
        }

        .doc-header-main {
            position: relative;
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: flex-start;
            justify-content: space-between;
        }

        .doc-header-text {
            max-width: 540px;
        }

        .doc-title {
            font-size: 22px;
            font-weight: 650;
            margin: 0 0 6px 0;
            letter-spacing: 0.02em;
        }

        .doc-badge-row {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
            margin-bottom: 8px;
        }

        .badge {
            border-radius: var(--radius-pill);
            font-size: 11px;
            padding: 4px 10px;
            border: 1px solid rgba(255,255,255,0.15);
            background: rgba(4,7,16,0.9);
            text-transform: uppercase;
            letter-spacing: 0.12em;
        }

        .badge-accent {
            border-color: rgba(91,141,255,0.85);
            background: radial-gradient(circle at top left, rgba(91,141,255,0.22), rgba(4,7,16,0.92));
            color: var(--accent-strong);
        }

        .badge-soft {
            color: var(--text-soft);
        }

        .doc-subtitle {
            font-size: 13px;
            color: var(--text-soft);
            max-width: 520px;
        }

        .doc-header-meta {
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 8px 10px;
            border-radius: var(--radius-lg);
            background: rgba(4,7,16,0.9);
            border: 1px solid rgba(255,255,255,0.06);
        }

        .meta-row {
            display: flex;
            justify-content: space-between;
            gap: 8px;
            font-size: 11px;
            color: var(--text-soft);
        }

        .meta-label {
            text-transform: uppercase;
            letter-spacing: 0.12em;
        }

        .meta-value {
            color: var(--accent-strong);
        }

        .meta-chip {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            border-radius: 999px;
            padding: 3px 8px;
            background: rgba(12,16,30,0.9);
            font-size: 11px;
            color: var(--text-soft);
            border: 1px solid rgba(255,255,255,0.06);
        }

        .meta-chip span.dot {
            width: 6px;
            height: 6px;
            border-radius: 999px;
            background: radial-gradient(circle at center, #6ce8ff, #5b8dff);
            box-shadow: 0 0 10px rgba(91,141,255,0.6);
        }

        /* Sections */

        section {
            margin-bottom: 24px;
            padding: 14px 12px 16px 12px;
            border-radius: var(--radius-lg);
            background: rgba(4,7,16,0.92);
            border: 1px solid rgba(255,255,255,0.06);
        }

        section:last-of-type {
            margin-bottom: 0;
        }

        section h2 {
            font-size: 17px;
            margin: 0 0 10px 0;
            display: flex;
            align-items: baseline;
            gap: 8px;
        }

        section h2 span.section-tag {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.18em;
            color: var(--accent-strong);
        }

        section h3 {
            font-size: 14px;
            margin: 12px 0 6px 0;
        }

        section p {
            margin: 4px 0 8px 0;
            font-size: 13px;
            color: var(--text-soft);
            line-height: 1.6;
        }

        ul, ol {
            margin: 4px 0 8px 18px;
            padding: 0;
            font-size: 13px;
            color: var(--text-soft);
        }

        li {
            margin-bottom: 4px;
        }

        .pill-list {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 6px;
        }

        .pill {
            border-radius: 999px;
            padding: 4px 10px;
            font-size: 12px;
            border: 1px solid rgba(255,255,255,0.05);
            background: rgba(10,12,22,0.96);
            color: var(--text-soft);
        }

        .pill-strong {
            border-color: rgba(91,141,255,0.8);
            background: rgba(91,141,255,0.12);
            color: var(--accent-strong);
        }

        /* Code blocks */

        pre {
            margin: 8px 0 10px 0;
            background: var(--code-bg);
            border-radius: 12px;
            padding: 10px 11px;
            border: 1px solid rgba(255,255,255,0.05);
            overflow-x: auto;
            font-size: 12px;
        }

        code {
            font-family: "JetBrains Mono", "Fira Code", "Cascadia Code", monospace;
            font-size: 12px;
        }

        /* Inline label */

        .inline-label {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.14em;
            color: var(--text-soft);
        }

        .inline-label span.dot {
            width: 6px;
            height: 6px;
            border-radius: 999px;
            background: var(--accent);
        }

        /* Footer */

        .footer {
            padding: 14px 16px 24px 16px;
            font-size: 11px;
            color: var(--text-soft);
            text-align: center;
        }

        .footer span {
            opacity: 0.8;
        }

        /* Mobile */

        @media (max-width: 860px) {
            .layout {
                grid-template-columns: minmax(0, 1fr);
            }

            .sidebar {
                position: relative;
                top: 0;
                max-height: none;
                order: 2;
                margin-top: 8px;
                display: none;
            }

            .sidebar.open {
                display: block;
            }

            .doc-header-main {
                flex-direction: column;
            }

            .doc-header-text {
                max-width: 100%;
            }

            .top-nav-inner {
                height: auto;
                padding-top: 8px;
                padding-bottom: 8px;
            }

            .top-nav-actions {
                display: none;
            }

            .menu-toggle {
                display: inline-flex;
            }

            .content {
                order: 1;
            }
        }

        @media (max-width: 480px) {
            .doc-title {
                font-size: 19px;
            }

            section {
                padding: 12px 10px 14px 10px;
            }

            .content {
                padding: 14px 12px 18px 12px;
            }
        }
    </style>
</head>
<body>
<header class="top-nav">
    <div class="top-nav-inner">
        <div class="brand">
            <div class="brand-logo">N</div>
            <div class="brand-text">
                <div class="brand-title">NexLang</div>
                <div class="brand-subtitle">ECROUS SCRIPTING LANGUAGE</div>
            </div>
        </div>
        <div class="top-nav-actions">
            <div class="pill-badge">Ecrous Engine · scripting</div>
            <button class="top-nav-btn" id="scrollToTop">
                <span class="icon">↑</span>
                <span>Наверх</span>
            </button>
        </div>
        <button class="menu-toggle" id="menuToggle">
            <span class="icon">☰</span>
            <span>Содержание</span>
        </button>
    </div>
</header>

<main class="page">
    <div class="layout">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-title">
                <span class="sidebar-title-dot"></span>
                <span>Документация NexLang v0.1</span>
            </div>

            <div class="toc-group">
                <div class="toc-heading">Введение</div>
                <ul class="toc-list">
                    <li><a href="#intro" class="toc-link active">Обзор языка</a></li>
                    <li><a href="#philosophy" class="toc-link">Философия дизайна</a></li>
                </ul>
            </div>

            <div class="toc-group">
                <div class="toc-heading">Синтаксис</div>
                <ul class="toc-list">
                    <li><a href="#syntax-basics" class="toc-link">Базовый синтаксис</a></li>
                    <li><a href="#variables" class="toc-link">Переменные и типы</a></li>
                    <li><a href="#functions" class="toc-link">Функции</a></li>
                    <li><a href="#classes" class="toc-link">Классы</a></li>
                    <li><a href="#flow" class="toc-link">Условия и циклы</a></li>
                </ul>
            </div>

            <div class="toc-group">
                <div class="toc-heading">Интеграция с движком</div>
                <ul class="toc-list">
                    <li><a href="#libraries" class="toc-link">Библиотеки и embedding</a></li>
                    <li><a href="#graphics" class="toc-link">Модуль graphics</a></li>
                    <li><a href="#entrypoints" class="toc-link">Игровой цикл</a></li>
                </ul>
            </div>

            <div class="toc-group">
                <div class="toc-heading">Справка</div>
                <ul class="toc-list">
                    <li><a href="#language-spec" class="toc-link">Сводка языка v0.1</a></li>
                    <li><a href="#roadmap" class="toc-link">Дальнейшее развитие</a></li>
                </ul>
            </div>
        </aside>

        <div class="content">
            <header class="doc-header">
                <div class="doc-header-main">
                    <div class="doc-header-text">
                        <div class="doc-badge-row">
                            <span class="badge badge-accent">NexLang v0.1</span>
                            <span class="badge badge-soft">Ecrous Engine</span>
                        </div>
                        <h1 class="doc-title">Язык сценариев NexLang</h1>
                        <p class="doc-subtitle">
                            NexLang — компактный скриптовый язык, вдохновлённый Python и C#, созданный специально для
                            игрового движка Ecrous Engine. Этот документ описывает базовый синтаксис, систему функций
                            и классов, а также интеграцию с подсистемой графики.
                        </p>
                    </div>
                    <div class="doc-header-meta">
                        <div class="meta-row">
                            <span class="meta-label">Статус</span>
                            <span class="meta-value">Draft / Experimental</span>
                        </div>
                        <div class="meta-row">
                            <span class="meta-label">Цель</span>
                            <span class="meta-value">Скриптинг геймплея и сцен Ecrous Engine</span>
                        </div>
                        <span class="meta-chip">
                            <span class="dot"></span>
                            Designed by NexLang · Engine: Ecrous
                        </span>
                    </div>
                </div>
            </header>

            <!-- Введение -->
            <section id="intro">
                <h2>
                    Обзор NexLang
                    <span class="section-tag">overview</span>
                </h2>
                <p>
                    NexLang объединяет читабельный, «питоновский» стиль записи с более структурным подходом из C#:
                    фигурные скобки для блоков, простая модель типов и удобные конструкции для описания геймплея.
                    Основная цель языка — сделать написание логики для Ecrous Engine быстрым и предсказуемым.
                </p>

                <h3>Ключевые особенности</h3>
                <ul>
                    <li>Лёгкий, человеко-читаемый синтаксис.</li>
                    <li>Функции и классы с разделением на <code>Global</code> и <code>Local</code> область видимости.</li>
                    <li>Встроенная интеграция с модулем <code>graphics</code> Ecrous Engine.</li>
                    <li>Специальные точки входа для игрового цикла: <code>OnLoad</code>, <code>OnUpdate</code>, <code>OnDestroy</code>.</li>
                </ul>

                <div class="pill-list">
                    <span class="pill pill-strong">игровые скрипты</span>
                    <span class="pill">логика сцен</span>
                    <span class="pill">быстрая итерация</span>
                </div>
            </section>

            <section id="philosophy">
                <h2>
                    Философия дизайна
                    <span class="section-tag">design</span>
                </h2>
                <p>
                    NexLang задуман как «тонкий слой» над Ecrous Engine: минимум синтаксического шума, максимум
                    прямой интеграции с API движка. Язык должен быть:
                </p>
                <ul>
                    <li><strong>Простым</strong> для парсинга и реализации интерпретатора.</li>
                    <li><strong>Предсказуемым</strong>: без скрытой магии и неочевидных преобразований.</li>
                    <li><strong>Целенаправленным</strong>: всё, что есть в языке, нужно для геймплея.</li>
                </ul>
            </section>

            <!-- Синтаксис -->
            <section id="syntax-basics">
                <h2>
                    Базовый синтаксис
                    <span class="section-tag">syntax</span>
                </h2>

                <h3>Комментарии</h3>
                <p>Поддерживаются однострочные и многострочные комментарии:</p>
                <pre><code>// Однострочный комментарий

/* 
   Многострочный
   комментарий
*/</code></pre>

                <h3>Литералы</h3>
                <pre><code>42          // int
3.14        // float
"Hello"     // string
true        // bool
false       // bool</code></pre>

                <h3>Окончание строк</h3>
                <p>
                    Точка с запятой <code>;</code> не обязательна. Интерпретатор может воспринимать конец строки
                    как окончание инструкции:
                </p>
                <pre><code>var x = 10
var y = 20

// Эквивалентно:
var x = 10;
var y = 20;</code></pre>
            </section>

            <section id="variables">
                <h2>
                    Переменные и типы
                    <span class="section-tag">types</span>
                </h2>
                <p>
                    В NexLang есть базовые примитивы и специальное ключевое слово <code>var</code> 
                    для неявного типа.
                </p>

                <h3>Базовые типы</h3>
                <ul>
                    <li><code>int</code> — целые числа.</li>
                    <li><code>float</code> — числа с плавающей точкой.</li>
                    <li><code>bool</code> — логический тип: <code>true</code> / <code>false</code>.</li>
                    <li><code>string</code> — строки.</li>
                    <li><code>var</code> — неявный тип, определяется по значению.</li>
                </ul>

                <h3>Объявление переменных</h3>
                <pre><code>var x = 10
int count = 0
float speed = 3.5
string playerName = "Daniil"
bool isAlive = true</code></pre>
            </section>

            <section id="functions">
                <h2>
                    Функции
                    <span class="section-tag">functions</span>
                </h2>
                <p>
                    Функции описываются конструкцией <code>defineF</code> с указанием области видимости:
                    <code>Global</code> или <code>Local</code>.
                </p>

                <h3>Глобальные функции</h3>
                <p>
                    Глобальные функции доступны другим скриптам и библиотекам.
                </p>
                <pre><code>defineF.Global InitGame() {
    // код инициализации
    graphics.CreateSprite("Player", "player.png", 0, 0, 0, 1.0)
}</code></pre>

                <h3>Локальные функции</h3>
                <p>
                    Локальные функции видны только внутри текущего файла.
                </p>
                <pre><code>defineF.Local CalculateDamage(base, multiplier) {
    var result = base * multiplier
    return result
}</code></pre>

                <h3>Вызов и возврат</h3>
                <pre><code>var dmg = CalculateDamage(10, 1.5)
InitGame()</code></pre>
                <p>
                    Оператор <code>return</code> завершает функцию и возвращает значение. Если <code>return</code>
                    отсутствует, функция может трактоваться как <code>void</code> (в зависимости от реализации рантайма).
                </p>
            </section>

            <section id="classes">
                <h2>
                    Классы и объекты
                    <span class="section-tag">oop</span>
                </h2>
                <p>
                    Классы объявляются через <code>defineC</code>. Поддерживаются глобальные и локальные классы.
                </p>

                <h3>Глобальный класс</h3>
                <pre><code>defineC.Global Player {
    var name
    var hp
    var x
    var y

    defineF.Local __init__(self, name) {
        self.name = name
        self.hp = 100
        self.x = 0
        self.y = 0
    }

    defineF.Local Move(self, dx, dy) {
        self.x = self.x + dx
        self.y = self.y + dy
    }

    defineF.Local TakeDamage(self, amount) {
        self.hp = self.hp - amount
        if self.hp <= 0 {
            self.hp = 0
        }
    }
}</code></pre>

                <h3>Локальный класс</h3>
                <pre><code>defineC.Local Enemy {
    var hp

    defineF.Local __init__(self) {
        self.hp = 50
    }
}</code></pre>

                <h3>Создание экземпляров</h3>
                <pre><code>var p = Player("Daniil")
p.Move(10, 5)
p.TakeDamage(30)</code></pre>

                <p>
                    Метод <code>__init__(self, ...)</code> выступает в роли конструктора. Первый параметр
                    <code>self</code> обязателен для методов экземпляра.
                </p>
            </section>

            <section id="flow">
                <h2>
                    Управляющие конструкции
                    <span class="section-tag">control flow</span>
                </h2>

                <h3>Условия</h3>
                <pre><code>if hp &lt;= 0 {
    // смерть
} else if hp &lt; 30 {
    // низкое здоровье
} else {
    // всё нормально
}</code></pre>

                <h3>Циклы (планируется в v0.1+)</h3>
                <p>
                    Базовые конструкции циклов могут выглядеть так:
                </p>
                <pre><code>while isRunning {
    Update()
}

for i in range(0, 10) {
    DoSomething(i)
}</code></pre>
                <p>
                    Реализация <code>range</code> и детальное поведение циклов зависит от текущей версии интерпретатора.
                </p>
            </section>

            <!-- Интеграция -->
            <section id="libraries">
                <h2>
                    Библиотеки и embedding
                    <span class="section-tag">modules</span>
                </h2>
                <p>
                    NexLang поддерживает подключение внешних файлов как библиотек с помощью директивы <code>embedding</code>.
                </p>

                <h3>Объявление библиотеки</h3>
                <pre><code>defineC.Global MathLib {
    defineF.Global Clamp(value, min, max) {
        if value &lt; min {
            return min
        }
        if value &gt; max {
            return max
        }
        return value
    }
}</code></pre>

                <h3>Подключение библиотеки</h3>
                <pre><code>embedding MathLib.nx
// или
embedding "libs\\math\\MathLib.nx"

var a = MathLib.Clamp(120, 0, 100)</code></pre>

                <h3>behaviour.Library</h3>
                <p>
                    Дополнительные метаданные для описания библиотечного поведения:
                </p>
                <pre><code>behaviour.Library = ["Library(Player)", "Library(EnemyAI)"]</code></pre>
                <p>
                    Это может использоваться на уровне Ecrous Engine как указание, какие классы экспонируются из данного файла.
                </p>
            </section>

            <section id="graphics">
                <h2>
                    Графический модуль graphics
                    <span class="section-tag">engine api</span>
                </h2>
                <p>
                    Модуль <code>graphics</code> предоставляет высокий уровень доступа к объектам сцены Ecrous Engine:
                    спрайты, текст, примитивы.
                </p>

                <h3>Создание объектов</h3>
                <pre><code>graphics.CreateSprite(name, texturePath, x, y, rotation, scale)
graphics.CreateText(name, fontPath, x, y, rotation, size)
graphics.CreateCircle(name, color, x, y, rotation, radius)
graphics.CreatePolygon(name, color, pointsArray)  // [x1, y1, x2, y2, ...]
graphics.CreateSquare(name, color, x, y, rotation, width, height)</code></pre>

                <h3>Пример инициализации сцены</h3>
                <pre><code>defineF.Global InitScene() {
    graphics.CreateSprite("Player", "player.png", 100, 200, 0, 1.0)
    graphics.CreateText("Title", "main.ttf", 50, 50, 0, 24)
    graphics.CreateCircle("Sun", "yellow", 400, 100, 0, 50)
}</code></pre>

                <h3>Свойства объектов</h3>
                <pre><code>graphics.Player.x = 150
graphics.Player.y = 220
graphics.Player.rotation = 45
graphics.Player.visible = true</code></pre>

                <p>
                    Здесь <code>graphics.Player</code> — обращение к объекту сцены с именем <code>"Player"</code>.
                </p>

                <h3>Удаление объектов</h3>
                <pre><code>graphics.DeleteObject("Player")
graphics.DeleteObject("Sun")</code></pre>
            </section>

            <section id="entrypoints">
                <h2>
                    Игровой цикл и точки входа
                    <span class="section-tag">lifecycle</span>
                </h2>
                <p>
                    Для интеграции с игровым циклом Ecrous Engine NexLang-скрипт может определять
                    специальные функции.
                </p>

                <h3>Стандартные точки входа</h3>
                <ul>
                    <li><code>OnLoad()</code> — вызывается при загрузке сцены.</li>
                    <li><code>OnUpdate(dt)</code> — вызывается каждый кадр, <code>dt</code> — дельта-время.</li>
                    <li><code>OnDestroy()</code> — вызывается при выгрузке сцены.</li>
                </ul>

                <h3>Пример игрового скрипта</h3>
                <pre><code>defineF.Global OnLoad() {
    graphics.CreateSprite("Player", "player.png", 0, 0, 0, 1.0)
}

defineF.Global OnUpdate(dt) {
    // Пример простого управления
    if Input.IsKeyDown("Right") {
        graphics.Player.x = graphics.Player.x + 100 * dt
    }
}

defineF.Global OnDestroy() {
    graphics.DeleteObject("Player")
}</code></pre>

                <p>
                    Движок Ecrous Engine вызывает эти функции по имени. Внутри можно использовать
                    любой NexLang-код и API движка.
                </p>
            </section>

            <!-- Справка -->
            <section id="language-spec">
                <h2>
                    Сводка NexLang v0.1
                    <span class="section-tag">reference</span>
                </h2>

                <h3>Комментарии</h3>
                <ul>
                    <li><code>// комментарий</code></li>
                    <li><code>/* многострочный комментарий */</code></li>
                </ul>

                <h3>Типы</h3>
                <ul>
                    <li><code>int</code>, <code>float</code>, <code>bool</code>, <code>string</code>, <code>var</code>.</li>
                </ul>

                <h3>Переменные</h3>
                <pre><code>var x = 10
int hp = 100
string name = "Daniil"</code></pre>

                <h3>Условия</h3>
                <pre><code>if condition { ... } else if other { ... } else { ... }</code></pre>

                <h3>Функции</h3>
                <pre><code>defineF.Global Name(args) { ... }
defineF.Local Name(args) { ... }
return value</code></pre>

                <h3>Классы</h3>
                <pre><code>defineC.Global ClassName {
    var field

    defineF.Local __init__(self, args) { ... }
    defineF.Local Method(self, args) { ... }
}</code></pre>

                <h3>Библиотеки</h3>
                <pre><code>embedding MathLib.nx</code></pre>

                <h3>Точки входа движка</h3>
                <pre><code>defineF.Global OnLoad() { ... }
defineF.Global OnUpdate(dt) { ... }
defineF.Global OnDestroy() { ... }</code></pre>
            </section>

            <section id="roadmap">
                <h2>
                    Дальнейшее развитие NexLang
                    <span class="section-tag">roadmap</span>
                </h2>
                <p>
                    Следующие шаги для эволюции NexLang и интеграции с Ecrous Engine:
                </p>
                <ul>
                    <li>Определить формальную грамматику (BNF/EBNF) для парсера.</li>
                    <li>Реализовать систему типов (динамическую с аннотациями).</li>
                    <li>Расширить стандартную библиотеку: <code>math</code>, <code>time</code>, <code>input</code>, <code>physics</code>.</li>
                    <li>Добавить поддержку классов-синглтонов и компонентной модели для игровых сущностей.</li>
                </ul>

                <p class="inline-label">
                    <span class="dot"></span>
                    <span>Эта документация описывает версию языка v0.1 и может меняться по мере развития Ecrous Engine.</span>
                </p>
            </section>
        </div>
    </div>
</main>

<footer class="footer">
    <span>NexLang &middot; Ecrous Engine scripting language &middot; v0.1</span>
</footer>
<script>
    // Плавный скролл по ссылкам TOC
    const tocLinks = document.querySelectorAll('.toc-link');
    const menuToggle = document.getElementById('menuToggle');
    const sidebar = document.getElementById('sidebar');
    const scrollToTopBtn = document.getElementById('scrollToTop');

    tocLinks.forEach(link => {
        link.addEventListener('click', e => {
            e.preventDefault();
            const targetId = link.getAttribute('href').slice(1);
            const target = document.getElementById(targetId);
            if (target) {
                const rect = target.getBoundingClientRect();
                const offset = window.scrollY + rect.top - 76; // чуть ниже навигации
                window.scrollTo({ top: offset, behavior: 'smooth' });
            }

            // Закрываем сайдбар на мобильных
            if (window.innerWidth <= 860) {
                sidebar.classList.remove('open');
            }
        });
    });

    // Подсветка активной секции при скролле
    const sections = Array.from(document.querySelectorAll('section[id]'));
    const sectionById = {};
    sections.forEach(sec => sectionById[sec.id] = sec);

    function updateActiveToc() {
        let currentId = 'intro';
        const scrollPos = window.scrollY;

        sections.forEach(sec => {
            const top = sec.offsetTop - 100;
            if (scrollPos >= top) {
                currentId = sec.id;
            }
        });

        tocLinks.forEach(link => {
            const id = link.getAttribute('href').slice(1);
            if (id === currentId) {
                link.classList.add('active');
            } else {
                link.classList.remove('active');
            }
        });
    }

    window.addEventListener('scroll', updateActiveToc);
    window.addEventListener('resize', () => {
        if (window.innerWidth > 860) {
            sidebar.classList.remove('open');
        }
    });

    // Переключение сайдбара на мобильных
    menuToggle.addEventListener('click', () => {
        sidebar.classList.toggle('open');
    });

    // Кнопка "Наверх"
    scrollToTopBtn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Первичная инициализация
    updateActiveToc();
</script>
</body>
</html>